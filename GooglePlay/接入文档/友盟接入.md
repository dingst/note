
在工程build.gradle配置脚本中buildscript和allprojects段中添加【友盟+】SDK新maven仓库地址。

maven { url 'https://dl.bintray.com/umsdk/release' }


在工程App 对应build.gradle配置脚本dependencies段中添加统计SDK库和其它库依赖：

 implementation  'com.umeng.umsdk:common:9.1.0' // (必选)版本号
 
 implementation  'com.umeng.umsdk:asms:1.1.3' // asms包依赖(必选)
 
 implementation 'com.umeng.umsdk:crash:0.0.4' // native crash包依赖(必选)
 
 添加so文件平台配置：
 android {
   
    defaultConfig {
        ndk {
            abiFilters "armeabi", "armeabi-v7a", "arm64-v8a"
        }
    }
  }
 

权限配置
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>  google 渠道 去掉这个
<uses-permission android:name="android.permission.INTERNET"/>


步骤：
1、初始化，

/**
* 注意: 即使您已经在AndroidManifest.xml中配置过appkey和channel值，也需要在App代码中调
* 用初始化接口（如需要使用AndroidManifest.xml中配置好的appkey和channel值，
* UMConfigure.init调用中appkey和channel参数请置为null）。
*/
UMConfigure.init(Context context, String appkey, String channel, int deviceType, String pushSecret);

或者

/** 
* 注意：如果您已经在AndroidManifest.xml中配置过appkey和channel值，可以调用此版本初始化函数。
*/
UMConfigure.init(Context context, int deviceType, String pushSecret);

2，配置自动页面采集，

// 选用AUTO页面采集模式
        MobclickAgent.setPageCollectionMode(MobclickAgent.PageMode.AUTO);
        //友盟统计日志加密设置
        UMConfigure.setEncryptEnabled(true);//6.0.0版本及以后
        UMConfigure.setLogEnabled(false); //true为测试模式，false为上线模式
        
        
        
 3，混淆配置
 
 -keep class com.umeng.** {*;}

-keep class com.uc.** {*;}

-keepclassmembers class * {
   public <init> (org.json.JSONObject);
}
 
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class com.zui.** {*;}

-keep class com.miui.** {*;}

-keep class com.heytap.** {*;}

-keep class a.** {*;}

-keep class com.vivo.** {*;}

 
